# CatStudy (喵星学习) 项目文档

## 1. 项目概述
**CatStudy** 是一款基于 Android 平台的在线学习与社区交流应用。它集成了课程学习、视频播放、社区互动、AI 智能助手以及个人成长体系（积分、签到）等功能，旨在为用户提供一个全面、便捷的学习环境。项目采用古典雅致的 UI 风格（象牙白、深红、金色），提供优质的视觉体验。

## 2. 功能模块详解

整个应用主要由以下五个核心模块组成：

### 2.1 首页模块 (Home)
*   **功能**：展示平台核心内容，包括轮播图推荐、搜索入口、课程推荐和新闻资讯。
*   **实现**：
    *   **轮播图**：使用 `Banner` 库展示热门课程或活动。
    *   **搜索**：`SearchActivity` 支持关键词搜索课程，并记录搜索历史（`table_search_history`）。
    *   **推荐列表**：通过 `RecyclerView` 展示课程列表，支持点击跳转详情。

### 2.2 课程与学习模块 (Course & Study)
*   **功能**：
    *   **课程浏览**：查看课程详情、目录、价格和用户评价。
    *   **视频播放**：支持章节视频点播，记录播放进度。
    *   **购物车与订单**：支持将课程加入购物车，使用积分（Coins）购买课程。
    *   **我的学习**：展示已购课程，追踪学习进度，提供每日签到功能。
*   **实现**：
    *   **播放器**：集成 **AndroidX Media3 (ExoPlayer)** 实现高清视频播放 (`VideoPlayerActivity`)。
    *   **数据存储**：使用 SQLite (`CourseDao`, `ChapterDao`, `OrderDao`) 本地存储课程结构和购买记录。
    *   **签到系统**：`CheckInDao` 记录每日签到状态，计算连续签到天数并奖励积分。

### 2.3 社区模块 (Discover/Community)
*   **功能**：用户交流广场，支持发布动态、浏览他人动态、点赞和评论。
*   **实现**：
    *   **动态发布**：`CreatePostActivity` 支持图文混排发布，支持调用系统相册选择图片（复制到私有目录存储）。
    *   **互动**：`PostDetailActivity` 展示动态详情，支持发表评论（`CommentAdapter`）和点赞互动。
    *   **列表展示**：使用 `DiscoverAdapter` 展示复杂布局（用户信息、文本、多图网格）。

### 2.4 AI 助手模块 (AI Chat)
*   **功能**：集成智能对话机器人，解答用户学习疑问。
*   **实现**：
    *   **核心技术**：接入 **讯飞星火 (Spark) 大模型 API**。
    *   **通信协议**：使用 **WebSocket** (`SparkApiHelper`) 实现实时流式对话，支持断点续传和签名鉴权。
    *   **界面**：`ChatActivity` 提供类微信的对话界面，实时渲染 AI 回复。

### 2.5 用户中心模块 (Profile)
*   **功能**：管理个人信息、查看积分、订单、收藏及设置。
*   **实现**：
    *   **个人资料**：支持修改头像、昵称、性别、年龄等信息 (`EditProfileActivity`)。
    *   **积分体系**：`MyPointsActivity` 展示积分余额及获取记录。
    *   **通用设置**：`SettingsActivity` 提供关于我们、退出登录等功能。

## 3. 技术架构与实现

### 3.1 技术栈
*   **开发语言**：Java
*   **最低兼容**：Android 7.0 (API 24)
*   **构建工具**：Gradle 8.x

### 3.2 关键库与框架
| 库名称 | 用途 | 说明 |
| :--- | :--- | :--- |
| **Retrofit + OkHttp** | 网络请求 | 用于 API 调用和 WebSocket 通信 |
| **Glide** | 图片加载 | 高效加载网络图片、头像和圆角处理 |
| **Media3 (ExoPlayer)** | 视频播放 | 谷歌官方推荐的媒体播放库 |
| **Gson** | JSON 解析 | 处理 API 响应和数据序列化 |
| **AndroidX** | 基础组件 | AppCompat, ConstraintLayout, RecyclerView, CardView |

### 3.3 数据存储设计
项目使用原生 **SQLite** 数据库，通过 `DBHelper` 和 DAO 模式封装数据操作：
*   **DBHelper**：管理数据库创建和版本升级（目前版本 11），内置 Mock 数据初始化逻辑。
*   **DAO 层**：独立封装各业务表的 CRUD 操作（如 `UserDao`, `SocialDao`），实现业务逻辑与数据访问解耦。

### 3.4 UI 设计风格
*   **主题**：Classical（古典风格）。
*   **配色**：
    *   主色调：`classical_red` (深红) - 用于标题栏、按钮。
    *   背景色：`classical_ivory` (象牙白) - 用于页面背景、卡片。
    *   装饰色：`classical_gold` (金色) - 用于边框、图标、高亮文字。
*   **组件**：大量使用 `CardView` 配合自定义 Drawable (`bg_classical_inner_border`) 实现统一的卡片式布局。

## 4. 总结
CatStudy 是一个功能完备的 Android 学习应用原型。它不仅实现了基础的 CRUD 业务，还挑战了 **WebSocket 实时通信**、**视频流媒体播放** 和 **复杂数据库关系管理** 等高级功能，代码结构清晰，模块化程度高。
